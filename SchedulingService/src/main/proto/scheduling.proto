syntax = "proto3";

package scheduling;

option java_multiple_files = true;
option java_package = "sdtrabalho.scheduling.proto";
option java_outer_classname = "SchedulingProto";

// Status da consulta
enum AppointmentStatus {
  STATUS_UNKNOWN   = 0;
  STATUS_SCHEDULED = 1;
  STATUS_CONFIRMED = 2;
  STATUS_CANCELLED = 3;
  STATUS_COMPLETED = 4;
}

// Modelo de consulta
message Appointment {
  string id           = 1;
  string patient_id   = 2;
  string doctor_id    = 3;
  string specialty    = 4;
  string datetime = 5; // "2025-12-10T14:00:00"
  AppointmentStatus status = 6;
}

// Criar consulta
message CreateAppointmentRequest {
  string patient_id   = 1;
  string doctor_id    = 2;
  string specialty    = 3;
  string datetime = 4;
}
message CreateAppointmentResponse {
  Appointment appointment = 1;
}

// Listar consultas de um usuário (paciente ou médico)
message ListAppointmentsRequest {
  string user_id  = 1;
  bool is_doctor  = 2; // true = médico, false = paciente
}
message ListAppointmentsResponse {
  repeated Appointment appointments = 1;
}

// Atualizar status
message UpdateStatusRequest {
  string appointment_id      = 1;
  AppointmentStatus new_status = 2;
}
message UpdateStatusResponse {
  Appointment appointment = 1;
}

// Serviço gRPC de Agendamento
service SchedulingService {
  rpc CreateAppointment(CreateAppointmentRequest) returns (CreateAppointmentResponse);
  rpc ListAppointments(ListAppointmentsRequest) returns (ListAppointmentsResponse);
  rpc UpdateStatus(UpdateStatusRequest) returns (UpdateStatusResponse);
}
